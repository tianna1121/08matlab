function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Jun-2015 13:49:34.
% 
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 18xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [0;0;0;0;0;4;8;1;0;0;0;0;14;7;7;0;0;3];
  x1_step1_gain = [0.0363636363636364;0.010989010989011;0.000163345311989546;5.87958607714017e-05;1.35581270803251e-05;8.56087423647703e-06;2.87384399625251e-06;8.97573410285294e-06;4.95214985205452e-06;2.64718339686573e-05;5.38981863260301e-05;0.00384615384615385;4.93699164414164e-06;3.56900674542275e-06;3.84873694075447e-06;4.4589111339011e-05;7.84701460329418e-06;2.53800664957742e-05];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.7104825529745677493;1.1166428283679379341;-1.6301437179234838926;-0.31243492468366973469;0.10015503861878327641;-0.15162359175119702326;-0.52838220841984240295;-1.0702164726834686448;1.061691628085373873;-6.9808864030636534892];
  IW1_1 = [-0.26832127204693145828 -0.0052728196285273809529 0.48349624920019257379 -0.026165115716283687819 -0.073028044816058346189 0.6301016159103187686 -1.1904660169465444142 -0.7643596128739373885 -0.30827977463996836249 -0.11378141647158761252 0.74773979454183969739 0.51586455248136831031 0.34587548531694678466 -0.14353891301557164528 0.85660344711558111808 -0.16253734979420433882 -0.29196392310446411811 1.9023574384954660133;-0.61976617191613803115 0.18585130389716669752 0.59716012466136525472 -0.25591588577081475497 0.066924247610743642367 0.47576752102882347017 0.49324447707237256688 0.42482714277021127458 -0.34414343391056628763 -0.26323281818920485353 -0.35179967309784387908 0.07872826454995830725 -0.3956054439754130847 -0.22003378782334526154 -0.453211156428608819 -0.30856111488133974863 -0.61689536531030542132 0.11858313313749209439;0.72671744051272424425 -0.42058146270055030147 0.20777407718327930986 0.46468401939597603345 -0.3324438869451865064 -0.57491171892909620489 -0.14628016216084732681 -0.38902121462872579771 -0.30916610160576174504 0.46198940730333359905 0.61280673223931636517 0.10982721532784207874 -0.35909609573344469791 0.22253017580467102099 -2.0715096367539063138 0.35056823969022088416 0.55306847494714372893 -0.24445548238560635412;-0.062717866028042426607 0.0015205845665861583704 1.4215026673377182398 0.25320169054355146088 0.80121063044377383022 -0.58087925831154418876 -0.27662054050243556347 -1.7036005539048455493 1.2859448495217584707 -0.81925751983994565819 0.47311477517121147685 1.1965446616936794566 0.017024199455281718851 -1.2671079688166233534 0.22434518220789440024 1.0371387122132225134 0.72560220511500095331 -2.910825044998943234;0.46110141771142776346 0.4225805652631695053 0.28444107732667894828 -0.94257509700889341442 -1.3666218821361630908 0.11383274064305116957 2.3440355057634736369 -0.43677918780571112212 1.8023013783004895316 -0.13565610840651920466 0.28818886960075706938 -0.09183975865423614493 -0.70458492571692876716 0.52068701938924655259 -0.43139052482376560871 0.27271641715689082242 -0.41252689422287297516 -1.7482381684119625564;-0.75130954425762985771 0.26566088193115067195 -0.50568654388899347829 -0.076222521695900519179 0.29088878184685229566 0.98768149736204913225 0.18749547466527280437 0.96905027741855798151 -0.61108482479168058088 -0.74200179109118125087 -0.97801078039337063785 -0.45690101660365323166 1.4565631874940365709 -0.16049987233022866562 0.57604751277439802948 -0.59693576473278253669 -0.14589928695146561766 0.25033997327764917484;0.16447004103404261333 -0.0648663464251708205 0.61111139252940327449 -0.30739156898787411976 0.57818917394191904346 -0.18474033415645196854 -0.25765732695910437133 -0.57508153587602883761 -0.054414883361468616152 -0.39680345941082895145 -0.75614268986618105028 -1.1020390994984841093 0.42509211175632033441 -0.73973262992152122308 0.65055676521747496377 0.35564819525425817037 -0.31171160830919564244 0.68429166690342324575;-0.030098028703543874829 -0.10003450672126448784 0.20603489425707105509 0.7173658602439959564 0.15392965175746659012 0.77778663932251690394 0.025781046957260266017 0.24399815299604332708 -0.11368242229757458128 -1.8758150492868590486 -1.0759977370675657404 0.18309016226368018954 0.66452471461984063961 -1.1366749624741885327 -0.41325912016115518011 0.00028344377452201030554 -0.63257068242324543395 0.45734407462203102712;0.75631914159992674751 0.95021409712938620373 -0.060172053056536320415 -0.37421279010415142707 0.45638285340024137282 -0.057046962155176725306 -0.076704027002561320225 -0.15710836313477816173 -0.21762141763060285915 0.32772474527341699524 0.34987283116545880857 -0.22694402860690326973 0.43718454212549168192 0.076048843631370016682 -0.56124959964688259095 -0.13313784455139854312 -0.44107645458792893445 -0.61178791265732868077;-0.11287996593905352816 0.24321675452984048427 1.9550823265699941444 0.098809862278578922123 0.075199939625283845901 -0.32362927951860576137 -3.3647434440604260253 -1.4696690652407649047 -0.18393148605366177462 -2.3237169758630780159 -0.0046170937959697511133 1.4226262477149225205 -0.060526030578166578611 -2.2771688324445404916 1.4914090303664542247 0.85938049790474957401 0.11112933898376767261 -2.6242433919762717665];
  
  % Layer 2
  b2 = -1.9743536234765433068;
  LW2_1 = [1.2040102346949117518 -0.9864872976826788431 -1.5205147860199057508 3.1116527788984051917 1.4801972084927963458 -0.95298102604338319477 -1.9209647535758767045 1.6111810194762354875 -0.13251366215639631685 -5.2890180597744471669];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.1886177034423;
  y1_step1_xoffset = 0.000246487552378605;
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = repmat(b2,1,Q) + LW2_1*a1;
  
  % Output 1
  y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
